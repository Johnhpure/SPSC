# Gemini API 管理后台实施计划

本文档定义了 Gemini API 管理后台的分步实施任务。每个任务都是可独立执行的代码实现步骤，按照依赖关系排序。

## 任务列表

- [x] 1. 数据库架构和基础设施




  - 创建管理后台所需的数据库表和索引
  - 实现数据库迁移脚本
  - 配置加密服务用于敏感数据保护
  - _需求: 1.1, 2.1, 6.1, 12.1_

- [x] 1.1 创建数据库表结构


  - 创建 `backend/migrations/admin_panel.sql` 文件
  - 定义 gemini_configs、gemini_api_keys、gemini_call_logs、gemini_benchmarks、gemini_admin_operations 表
  - 创建必要的索引以优化查询性能
  - _需求: 1.1, 2.1, 6.1_

- [x] 1.2 实现加密服务


  - 创建 `backend/src/services/gemini-admin/encryption.ts`
  - 实现 AES-256-GCM 加密和解密功能
  - 实现密钥脱敏函数
  - _需求: 2.4, 12.5_

- [ ]* 1.3 编写属性测试：敏感信息脱敏完整性
  - **属性 5: 敏感信息脱敏完整性**
  - **验证需求: 2.4, 6.5, 12.5**

- [x] 1.4 创建数据库初始化脚本


  - 创建 `backend/scripts/init_admin_panel.ts`
  - 实现自动执行迁移 SQL 的逻辑
  - 插入默认配置数据
  - _需求: 1.1_

- [x] 2. 配置管理服务




  - 实现 API 配置的 CRUD 操作
  - 实现配置验证和备份恢复功能
  - 集成配置热更新机制
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 11.1, 11.2, 11.3, 11.5_

- [x] 2.1 实现 AdminConfigService


  - 创建 `backend/src/services/gemini-admin/config-service.ts`
  - 实现 getConfig()、updateConfig() 方法
  - 实现 URL 格式验证函数
  - 实现配置更新后触发客户端重新初始化
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5_

- [ ]* 2.2 编写属性测试：URL 格式验证一致性
  - **属性 1: URL 格式验证一致性**
  - **验证需求: 1.2, 1.5**

- [ ]* 2.3 编写属性测试：配置往返一致性
  - **属性 2: 配置往返一致性**
  - **验证需求: 1.3, 3.5, 11.5**

- [ ]* 2.4 编写属性测试：配置更新生效性
  - **属性 3: 配置更新生效性**
  - **验证需求: 1.4, 3.6**

- [x] 2.5 实现模型列表获取功能


  - 在 AdminConfigService 中实现 fetchModelList() 方法
  - 使用 Context7 文档中的 genai.list_models() API
  - 实现模型信息解析和缓存
  - _需求: 3.1, 3.2_

- [ ]* 2.6 编写属性测试：模型列表解析完整性
  - **属性 8: 模型列表解析完整性**
  - **验证需求: 3.2**

- [x] 2.7 实现配置备份和恢复


  - 实现 exportConfig() 方法导出 JSON
  - 实现 importConfig() 方法验证和导入配置
  - 实现配置文件加密选项
  - _需求: 11.1, 11.2, 11.3, 11.5_

- [ ]* 2.8 编写属性测试：配置备份完整性
  - **属性 23: 配置备份完整性**
  - **验证需求: 11.2**

- [ ]* 2.9 编写属性测试：配置恢复往返一致性
  - **属性 24: 配置恢复往返一致性**
  - **验证需求: 11.3, 11.5**

- [x] 3. API Key 管理服务





  - 实现多 API Key 的 CRUD 操作
  - 实现密钥轮询策略
  - 实现使用统计记录
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7_

- [x] 3.1 实现 AdminKeyService


  - 创建 `backend/src/services/gemini-admin/key-service.ts`
  - 实现 listKeys()、addKey()、addMultipleKeys() 方法
  - 实现 updateKey()、deleteKey()、toggleKeyStatus() 方法
  - 密钥存储时使用加密服务加密
  - _需求: 2.1, 2.2, 2.3, 2.5, 2.6_

- [ ]* 3.2 编写属性测试：批量密钥添加原子性
  - **属性 4: 批量密钥添加原子性**
  - **验证需求: 2.2, 2.3**

- [ ]* 3.3 编写属性测试：密钥删除幂等性
  - **属性 6: 密钥删除幂等性**
  - **验证需求: 2.5**

- [x] 3.4 实现密钥轮询策略


  - 实现 getNextKey() 方法支持多种策略
  - 实现轮询（round-robin）策略
  - 实现优先级（priority）策略
  - 实现随机（random）策略
  - 实现最少使用（least-used）策略
  - _需求: 2.7_

- [ ]* 3.5 编写属性测试：密钥轮询策略一致性
  - **属性 7: 密钥轮询策略一致性**
  - **验证需求: 2.7**

- [x] 3.6 实现密钥使用统计


  - 实现 recordKeyUsage() 方法
  - 更新 usage_count、success_count、failure_count
  - 更新 last_used_at 时间戳
  - _需求: 2.7_

- [x] 4. 检查点 - 配置和密钥管理测试




  - 确保所有测试通过，如有问题请询问用户

- [x] 5. 日志记录拦截器




  - 实现日志拦截和记录功能
  - 使用装饰器模式包装现有 Gemini 服务
  - 记录所有 API 调用的详细信息
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 5.1 实现 LoggingInterceptor


  - 创建 `backend/src/services/gemini-admin/logging-interceptor.ts`
  - 实现 logRequest() 方法记录请求开始
  - 实现 logResponse() 方法记录响应数据
  - 生成唯一的 requestId (UUID)
  - _需求: 6.1, 6.2, 6.4_

- [ ]* 5.2 编写属性测试：日志记录完整性
  - **属性 12: 日志记录完整性**
  - **验证需求: 6.1, 6.2, 6.3**

- [ ]* 5.3 编写属性测试：日志唯一标识符唯一性
  - **属性 13: 日志唯一标识符唯一性**
  - **验证需求: 6.4**

- [x] 5.4 实现服务包装器

  - 实现 wrapService() 方法使用装饰器模式
  - 包装 GeminiTextService、GeminiImageService 等
  - 自动记录所有方法调用
  - 处理异步方法和错误情况
  - _需求: 6.1, 6.2, 6.3_

- [x] 5.5 集成日志拦截器到现有服务


  - 修改 `backend/src/services/gemini/client-manager.ts`
  - 在服务初始化时应用日志包装器
  - 确保不影响现有功能
  - _需求: 6.1_

- [x] 6. 日志查询服务





  - 实现日志查询、过滤和导出功能
  - 支持多维度过滤和全文搜索
  - 实现分页和导出功能
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 8.1, 8.2, 8.3, 8.4, 8.6, 9.1, 9.2, 9.3, 9.4, 9.5_

- [x] 6.1 实现 LogQueryService


  - 创建 `backend/src/services/gemini-admin/log-query-service.ts`
  - 实现 queryLogs() 方法支持多维度过滤
  - 实现分页功能（page, pageSize）
  - 实现全文搜索功能
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_

- [ ]* 6.2 编写属性测试：日志过滤结果正确性
  - **属性 14: 日志过滤结果正确性**
  - **验证需求: 7.2, 7.3, 7.4**

- [ ]* 6.3 编写属性测试：日志全文搜索包含性
  - **属性 15: 日志全文搜索包含性**
  - **验证需求: 7.5**

- [ ]* 6.4 编写属性测试：日志分页一致性
  - **属性 16: 日志分页一致性**
  - **验证需求: 7.6**

- [x] 6.5 实现日志详情查询

  - 实现 getLogDetail() 方法
  - 通过 requestId 查询完整日志信息
  - 格式化 JSON 数据以便展示
  - _需求: 8.1, 8.2, 8.3, 8.4_

- [ ]* 6.6 编写属性测试：日志详情完整性
  - **属性 17: 日志详情完整性**
  - **验证需求: 8.2, 8.3, 8.4**

- [x] 6.7 实现日志导出功能

  - 实现 exportLogs() 方法
  - 支持 JSON、CSV、Excel 格式导出
  - 实现后台任务处理大量数据导出
  - 生成下载链接
  - _需求: 9.1, 9.2, 9.3, 9.4, 9.5_

- [ ]* 6.8 编写属性测试：日志导出数据完整性
  - **属性 18: 日志导出数据完整性**
  - **验证需求: 9.2, 9.5**

- [ ]* 6.9 编写属性测试：日志导出格式正确性
  - **属性 19: 日志导出格式正确性**
  - **验证需求: 9.1**

- [x] 7. 模型测速服务




  - 实现模型性能测试功能
  - 支持单个和批量模型测速
  - 记录和查询测速历史
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

- [x] 7.1 实现 BenchmarkService

  - 创建 `backend/src/services/gemini-admin/benchmark-service.ts`
  - 实现 benchmarkModel() 方法测试单个模型
  - 使用标准测试提示词（如 "Hello, how are you?"）
  - 记录首 token 时间、总响应时间、token/秒
  - _需求: 4.1, 4.2, 4.3_

- [ ]* 7.2 编写属性测试：测速性能指标计算正确性
  - **属性 9: 测速性能指标计算正确性**
  - **验证需求: 4.3**

- [x] 7.3 实现批量测速功能

  - 实现 benchmarkMultipleModels() 方法
  - 支持并发控制（最多 3 个并发）
  - 生成对比报告
  - _需求: 4.5_

- [ ]* 7.4 编写属性测试：批量测速结果完整性
  - **属性 10: 批量测速结果完整性**
  - **验证需求: 4.5**

- [x] 7.5 实现测速结果存储和查询

  - 将测速结果保存到 gemini_benchmarks 表
  - 实现 getBenchmarkHistory() 方法
  - 实现 compareBenchmarks() 方法生成对比
  - _需求: 4.6_

- [ ]* 7.6 编写属性测试：测速结果往返一致性
  - **属性 11: 测速结果往返一致性**
  - **验证需求: 4.6**

- [x] 7.7 实现模型功能测试

  - 支持自定义提示词测试
  - 支持文本生成、图像分析、图像生成测试
  - 返回详细的测试结果和元数据
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

- [x] 8. 检查点 - 日志和测速功能测试





  - 确保所有测试通过，如有问题请询问用户

- [x] 9. 统计分析服务





  - 实现统计数据聚合和计算
  - 提供多维度统计指标
  - 支持时间序列数据
  - _需求: 10.1, 10.2, 10.3, 10.4, 10.5, 10.6_

- [x] 9.1 实现 StatisticsService


  - 创建 `backend/src/services/gemini-admin/statistics-service.ts`
  - 实现 getStatistics() 方法计算基本统计
  - 计算总调用次数、成功率、失败率
  - 计算平均响应时间
  - _需求: 10.1, 10.2_

- [ ]* 9.2 编写属性测试：统计数据计算正确性
  - **属性 20: 统计数据计算正确性**
  - **验证需求: 10.2, 10.3, 10.4**

- [x] 9.3 实现百分位数计算

  - 实现 P95、P99 响应时间计算
  - 使用高效的百分位数算法
  - _需求: 10.4_

- [ ]* 9.4 编写属性测试：百分位数计算正确性
  - **属性 21: 百分位数计算正确性**
  - **验证需求: 10.4**

- [x] 9.5 实现时间序列数据聚合

  - 实现 getTimeSeriesData() 方法
  - 支持按小时、天、周聚合
  - 生成趋势图数据
  - _需求: 10.2_

- [x] 9.6 实现模型使用分布统计

  - 实现 getModelUsageDistribution() 方法
  - 计算各模型的调用次数和占比
  - 生成饼图数据
  - _需求: 10.3_

- [x] 9.7 实现成本分析

  - 实现 getCostAnalysis() 方法
  - 计算 token 使用量
  - 基于定价模型预估成本
  - _需求: 10.5_

- [ ]* 9.8 编写属性测试：成本计算一致性
  - **属性 22: 成本计算一致性**
  - **验证需求: 10.5**

- [x] 10. 后端 API 路由






  - 创建管理后台的 REST API 端点
  - 实现权限验证中间件
  - 集成所有服务模块
  - _需求: 1.1-12.5（所有需求）_

- [x] 10.1 创建 API 路由文件



  - 创建 `backend/src/routes/gemini-admin.ts`
  - 定义路由结构和端点
  - 应用权限验证中间件
  - _需求: 12.1, 12.2, 12.3_

- [x] 10.2 实现配置管理 API


  - GET /api/gemini-admin/config - 获取配置
  - PUT /api/gemini-admin/config - 更新配置
  - POST /api/gemini-admin/config/validate-url - 验证 URL
  - GET /api/gemini-admin/models - 获取模型列表
  - POST /api/gemini-admin/config/export - 导出配置
  - POST /api/gemini-admin/config/import - 导入配置
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 3.1, 3.2, 11.1, 11.2, 11.3, 11.5_

- [x] 10.3 实现密钥管理 API


  - GET /api/gemini-admin/keys - 获取密钥列表
  - POST /api/gemini-admin/keys - 添加密钥
  - POST /api/gemini-admin/keys/batch - 批量添加密钥
  - PUT /api/gemini-admin/keys/:id - 更新密钥
  - DELETE /api/gemini-admin/keys/:id - 删除密钥
  - PATCH /api/gemini-admin/keys/:id/toggle - 切换密钥状态
  - _需求: 2.1, 2.2, 2.3, 2.5, 2.6_

- [x] 10.4 实现日志查询 API


  - GET /api/gemini-admin/logs - 查询日志（支持过滤和分页）
  - GET /api/gemini-admin/logs/:requestId - 获取日志详情
  - POST /api/gemini-admin/logs/export - 导出日志
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 8.1, 9.1, 9.2, 9.5_

- [x] 10.5 实现测速 API


  - POST /api/gemini-admin/benchmark - 测试单个模型
  - POST /api/gemini-admin/benchmark/batch - 批量测试
  - GET /api/gemini-admin/benchmark/history - 获取历史记录
  - POST /api/gemini-admin/test - 功能测试
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 5.1, 5.2_

- [x] 10.6 实现统计 API


  - GET /api/gemini-admin/statistics - 获取统计数据
  - GET /api/gemini-admin/statistics/timeseries - 获取时间序列
  - GET /api/gemini-admin/statistics/distribution - 获取分布数据
  - GET /api/gemini-admin/statistics/cost - 获取成本分析
  - _需求: 10.1, 10.2, 10.3, 10.4, 10.5_

- [x] 10.7 实现权限验证中间件



  - 创建 requireAuth 中间件验证登录状态
  - 创建 requireAdmin 中间件验证管理员权限
  - 实现操作审计日志记录
  - _需求: 12.1, 12.2, 12.3, 12.4_

- [ ]* 10.8 编写属性测试：权限检查一致性
  - **属性 25: 权限检查一致性**
  - **验证需求: 12.2, 12.3**

- [ ]* 10.9 编写属性测试：操作审计日志完整性
  - **属性 26: 操作审计日志完整性**
  - **验证需求: 12.4**

- [x] 10.10 集成路由到主应用


  - 在 `backend/src/app.ts` 中导入管理后台路由
  - 挂载到 /api/gemini-admin 路径
  - 确保与现有路由不冲突
  - _需求: 所有需求_

- [x] 11. 检查点 - 后端 API 测试





  - 确保所有测试通过，如有问题请询问用户

- [x] 12. 前端基础设施





  - 创建前端路由和页面结构
  - 实现 API 调用封装
  - 创建通用组件
  - _需求: 所有需求_

- [x] 12.1 配置前端路由


  - 在 `frontend/src/router/index.ts` 中添加管理后台路由
  - 创建 /admin/gemini 路由组
  - 配置子路由：config, keys, logs, benchmark, statistics
  - 添加路由守卫验证权限
  - _需求: 12.1, 12.2_

- [x] 12.2 创建 API 调用封装


  - 创建 `frontend/src/api/gemini-admin.ts`
  - 封装所有管理后台 API 调用
  - 实现统一的错误处理
  - 实现请求拦截器添加认证信息
  - _需求: 所有需求_

- [x] 12.3 创建布局组件


  - 创建 `frontend/src/views/GeminiAdminLayout.vue`
  - 实现侧边栏导航
  - 实现顶部面包屑
  - 使用 Tailwind CSS 构建响应式布局
  - _需求: 所有需求_

- [x] 12.4 创建通用组件


  - 创建 LoadingSpinner 组件
  - 创建 ErrorAlert 组件
  - 创建 ConfirmDialog 组件
  - 创建 Pagination 组件
  - _需求: 所有需求_

- [x] 13. 配置管理页面





  - 实现 API 配置管理界面
  - 实现模型选择界面
  - 实现配置备份恢复界面
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 11.1, 11.2, 11.3, 11.5_

- [x] 13.1 创建配置管理页面


  - 创建 `frontend/src/views/admin/ConfigManagement.vue`
  - 实现 Base URL 配置表单
  - 实现 URL 格式验证
  - 实现配置保存和更新
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5_

- [x] 13.2 实现模型管理组件


  - 创建 ModelSelector 组件
  - 实现"获取模型列表"按钮
  - 显示模型列表和基本信息
  - 实现不同服务类型的模型选择
  - _需求: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6_

- [x] 13.3 实现配置备份恢复


  - 添加"导出配置"按钮
  - 实现配置文件下载
  - 添加"导入配置"文件上传
  - 实现导入前的确认对话框
  - _需求: 11.1, 11.2, 11.3, 11.5_

- [x] 14. 密钥管理页面




  - 实现 API Key 管理界面
  - 支持批量添加和单个管理
  - 实现密钥脱敏显示
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7_

- [x] 14.1 创建密钥管理页面


  - 创建 `frontend/src/views/admin/KeyManagement.vue`
  - 实现密钥列表展示（表格形式）
  - 显示脱敏后的密钥、名称、状态、优先级
  - 显示使用统计（调用次数、成功率）
  - _需求: 2.1, 2.4_

- [x] 14.2 实现密钥添加功能

  - 创建添加密钥对话框
  - 支持单个密钥输入
  - 支持批量密钥输入（文本框，换行分隔）
  - 实现密钥格式验证
  - _需求: 2.2, 2.3_

- [x] 14.3 实现密钥编辑和删除

  - 实现编辑密钥对话框（修改名称、优先级、状态）
  - 实现删除确认对话框
  - 实现启用/禁用切换按钮
  - _需求: 2.5, 2.6_

- [x] 14.4 实现密钥轮询策略配置

  - 添加轮询策略选择器
  - 支持轮询、优先级、随机、最少使用策略
  - 显示当前策略和说明
  - _需求: 2.7_

- [x] 15. 日志查看页面




  - 实现日志列表和过滤界面
  - 实现日志详情查看
  - 实现日志导出功能
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 8.1, 8.2, 8.3, 8.4, 8.6, 9.1, 9.2, 9.3, 9.4, 9.5_

- [x] 15.1 创建日志查看页面


  - 创建 `frontend/src/views/admin/LogViewer.vue`
  - 实现日志列表表格
  - 显示时间戳、模型、服务、状态、响应时间
  - 实现分页控件
  - _需求: 7.1, 7.6_


- [x] 15.2 实现日志过滤功能

  - 添加时间范围选择器
  - 添加模型名称下拉选择
  - 添加状态筛选（成功/失败）
  - 添加关键词搜索框
  - 实现过滤条件组合查询
  - _需求: 7.2, 7.3, 7.4, 7.5_

- [x] 15.3 实现日志详情查看


  - 实现点击日志行展开详情
  - 创建日志详情对话框或侧边栏
  - 显示完整的请求参数（格式化 JSON）
  - 显示完整的响应内容（格式化 JSON）
  - 显示性能指标和 token 使用量
  - 添加复制和导出按钮
  - _需求: 8.1, 8.2, 8.3, 8.4, 8.6_

- [x] 15.4 实现日志导出功能


  - 添加"导出日志"按钮
  - 创建导出配置对话框
  - 支持选择导出格式（JSON/CSV/Excel）
  - 支持选择导出范围（当前过滤结果）
  - 实现后台任务状态轮询
  - 提供下载链接
  - _需求: 9.1, 9.2, 9.3, 9.4, 9.5_

- [x] 16. 测速工具页面




  - 实现模型测速界面
  - 实现功能测试界面
  - 显示测速结果和历史
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

- [x] 16.1 创建测速工具页面


  - 创建 `frontend/src/views/admin/BenchmarkTool.vue`
  - 实现模型选择器（支持多选）
  - 添加"开始测速"按钮
  - 显示测速进度和状态
  - _需求: 4.1, 4.2_

- [x] 16.2 实现测速结果展示

  - 创建测速结果表格
  - 显示响应时间、首 token 时间、token/秒
  - 实现结果排序和对比
  - 添加图表可视化（柱状图对比）
  - _需求: 4.3, 4.5_

- [x] 16.3 实现测速历史查看


  - 添加"查看历史"标签页
  - 显示历史测速记录
  - 支持按模型筛选
  - 显示趋势图
  - _需求: 4.6_


- [x] 16.4 实现功能测试界面

  - 添加"功能测试"标签页
  - 实现自定义提示词输入
  - 支持文本生成测试
  - 支持图像上传和分析测试
  - 显示测试结果和元数据
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_

- [x] 17. 统计面板页面





  - 实现统计数据展示
  - 实现图表可视化
  - 实现实时数据刷新
  - _需求: 10.1, 10.2, 10.3, 10.4, 10.5, 10.6_

- [x] 17.1 创建统计面板页面


  - 创建 `frontend/src/views/admin/StatisticsDashboard.vue`
  - 实现关键指标卡片（总调用、成功率、平均响应时间）
  - 使用 Tailwind CSS 构建仪表盘布局
  - _需求: 10.1_

- [x] 17.2 实现趋势图


  - 集成图表库（Chart.js 或 ECharts）
  - 实现调用量趋势折线图
  - 支持时间粒度切换（小时/天/周）
  - 实现响应时间趋势图
  - _需求: 10.2_

- [x] 17.3 实现模型使用分布图


  - 实现模型调用次数饼图
  - 显示各模型占比
  - 实现交互式图例
  - _需求: 10.3_

- [x] 17.4 实现性能指标展示


  - 显示平均响应时间
  - 显示 P95、P99 响应时间
  - 实现性能指标柱状图
  - _需求: 10.4_

- [x] 17.5 实现成本分析


  - 显示 token 使用量统计
  - 显示预估成本
  - 实现成本趋势图
  - 添加成本预警提示
  - _需求: 10.5_

- [x] 17.6 实现数据刷新

  - 添加"刷新"按钮
  - 实现自动刷新（可配置间隔）
  - 显示最后更新时间
  - _需求: 10.6_

- [x] 18. 检查点 - 前端功能测试






  - 确保所有测试通过，如有问题请询问用户

- [ ]* 19. 集成测试和优化
  - 执行端到端集成测试
  - 性能优化和代码清理
  - 文档编写
  - _需求: 所有需求_

- [ ]* 19.1 编写集成测试
  - 测试完整的配置管理流程
  - 测试完整的密钥管理流程
  - 测试完整的日志记录和查询流程
  - 测试完整的测速流程
  - 测试完整的统计流程
  - _需求: 所有需求_

- [ ]* 19.2 性能优化
  - 优化数据库查询（添加必要的索引）
  - 实现缓存策略
  - 优化前端渲染性能
  - 实现虚拟滚动（日志列表）
  - _需求: 性能需求_

- [ ]* 19.3 代码清理和重构
  - 移除未使用的代码
  - 统一代码风格
  - 添加必要的注释
  - 运行 lint 检查并修复
  - _需求: 代码质量_

- [ ]* 19.4 编写使用文档
  - 创建 `docs/gemini-admin-panel.md`
  - 编写功能说明
  - 编写配置指南
  - 添加截图和示例
  - 编写故障排查指南
  - _需求: 文档需求_

- [ ] 20. 最终检查点
  - 确保所有测试通过，如有问题请询问用户
  - 验证所有功能正常工作
  - 确认文档完整

## 注意事项

1. **MCP 工具使用**: 在开发过程中积极使用 Context7 MCP 获取 Gemini API 最新文档和最佳实践
2. **增量开发**: 每个任务完成后进行验证，确保功能正常
3. **测试优先**: 核心功能的属性测试必须实现，单元测试和集成测试标记为可选
4. **安全第一**: 所有敏感数据必须加密存储，API Key 必须脱敏显示
5. **错误处理**: 所有服务都要有完善的错误处理和降级策略
6. **日志记录**: 关键操作都要记录审计日志
7. **性能考虑**: 注意数据库查询优化和前端渲染性能

## 依赖关系

- 任务 1-3: 基础设施和核心服务（必须先完成）
- 任务 4: 第一个检查点
- 任务 5-7: 日志和测速功能
- 任务 8: 第二个检查点
- 任务 9-10: 统计和 API 路由
- 任务 11: 第三个检查点
- 任务 12-17: 前端界面开发
- 任务 18: 第四个检查点
- 任务 19-20: 集成测试和最终验证

## 实施状态总结

### 待完成 🔄
- 所有任务均待实施
- 建议按顺序执行，确保每个检查点通过后再继续
- 属性测试任务标记为可选（*），但强烈建议实现以确保正确性
